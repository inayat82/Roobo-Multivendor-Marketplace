"use strict";(()=>{var e={};e.id=373,e.ids=[373],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},5938:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>m,patchFetch:()=>c,requestAsyncStorage:()=>d,routeModule:()=>p,serverHooks:()=>h,staticGenerationAsyncStorage:()=>l});var s={};t.r(s),t.d(s,{POST:()=>u});var a=t(3278),i=t(5002),n=t(4877),o=t(1309);async function u(e){try{let{shop:r}=await e.json();if(!r)return o.NextResponse.json({error:"Shop parameter is required"},{status:400});let{getDatabase:s,users:a}=await t.e(554).then(t.bind(t,7554)),i=s();if(!i)return o.NextResponse.json({error:"Database not available"},{status:500});let n=await i.query.users.findFirst({where:(e,{and:t,eq:s})=>t(s(e.shopifyStoreId,r),s(e.role,"super_admin"))});if(n)return o.NextResponse.json({exists:!0,message:"Super Admin found. Redirecting to Shopify OAuth...",user:{id:n.id,email:n.email,role:n.role}});return o.NextResponse.json({exists:!1,message:"No Super Admin found for this store. Please install the app first.",installUrl:`/install?shop=${r}`})}catch(e){return console.error("Super Admin check error:",e),o.NextResponse.json({error:"Authentication check failed"},{status:500})}}let p=new a.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/auth/super-admin/route",pathname:"/api/auth/super-admin",filename:"route",bundlePath:"app/api/auth/super-admin/route"},resolvedPagePath:"C:\\Users\\inaya\\OneDrive\\Desktop\\Project 2025\\pos-app-26-Aug-9AM (2)\\multivendor-marketplace\\app\\api\\auth\\super-admin\\route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:d,staticGenerationAsyncStorage:l,serverHooks:h}=p,m="/api/auth/super-admin/route";function c(){return(0,n.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:l})}}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[787,833],()=>t(5938));module.exports=s})();